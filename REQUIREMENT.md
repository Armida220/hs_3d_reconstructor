#慧视三维重建软件需求分析

##三维浏览

###显示三维点云或三维模型。(优先级：1) (难度：2)

1. 能够显示大数据量的点云或三维模型。
1. 能够点选三维点或是三维模型表面上的点，并在显示与该点关联的所有照片。

###显示照片的位置和朝向。(优先级：1) (难度：1)

1. 直观表现照片拍摄的位置和朝向。

###显示DOM和DEM。(优先级：2) (难度：2)

1. 可在二维或三维模式中显示DOM，并能显示大数据量的DOM。
1. 若同一区域同时包含DOM和DEM，则能显示三维地形。

###显示三维几何信息。(优先级：2) (难度：1)

1. 显示三维点。
1. 显示三维线。
1. 显示三维面。

###显示照片及照片列表。(优先级：1) (难度：1)

1. 显示所有导入的照片列表。
1. 点击照片列表中的照片时，显示相应的照片。

###三维场景漫游，包括旋转、缩放、平移。(优先级：1) (难度：2)

1. 能够直观的旋转、缩放、平移三维场景。
1. 即使是较大的数据量也能流畅的漫游。

##三维数据导入

###导入照片。(优先级：1) (难度：1)

1. 若导入照片中的exif信息中包含焦距、ccd宽度等信息，则将其导入为初始相机内参数。
1. 若导入照片中的exif信息中包含POSE信息，则将其导入为初始相机外参数。

###导入相机内参数。(优先级：1) (难度：2)

1. 导入相机内参数文件，并设置相应的照片初始内参数。
1. 导入相机标定数据，计算相机内参数。

###导入POSE信息。(优先级：1) (难度：1)

1. 导入包含POSE数据的文件，并设置相应的照片的初始外参数。

###导入像控点信息。(优先级：1) (难度：1)

1. 导入像控点实测三维坐标。
1. 导入像控点在各张影像上的二维坐标。

###导入连接点信息。(优先级：1) (难度：1)

1. 导入连接点在各张照片上的二维坐标。

###导入等高线、线划图、地形图等测绘信息。(优先级：2) (难度：2)

1. 导入dxf、dwg等格式的制图信息。

###导入三维模型。(优先级：1) (难度：1)

1. 导入其他软件生成的三维模型。

##三维数据编辑

###量测像控点。(优先级：1) (难度：2)

1. 量测像控点在各张照片上的二维坐标。

###编辑三维几何信息。(优先级：3) (难度：2)

1. 编辑三维点。
1. 编辑三维线。
1. 编辑三维面。

###编辑三维模型。(优先级：3) (难度：2)

1. 利用各张照片上的信息，编辑模型的贴图。
1. 通过在各张照片上采集同名点，编辑模型的关键点坐标。

##三维重建计算

三维重建计算量较大，应尽量使用多线程、GPU并行计算，并实现分布式计算，将计算任务分布到多个计算节点中。

###计算相机内参数。(优先级：2) (难度：2)

1. 根据平面点与照片上的点对应，计算相机焦距、主点偏移、畸变参数等内参数。

###计算畸变校正影像。(优先级：2) (难度：1)

1. 根据焦距以及畸变参数计算校正后的影像。

###计算相机外参数。(优先级：2) (难度：3)

1. 根据从各张照片中提取及匹配同名点，计算相机的相对外参数。
1. 根据像控点，计算相机的绝对外参数。
1. 利用相机外参数和同名点，计算稀疏点云。

###计算三维点云。(优先级：2) (难度：3)

1. 根据相机外参数计算密集点云。

###计算三维表面模型。(优先级：2) (难度：3)

1. 根据密集点云计算三维表面模型。

###计算三维贴图。(优先级：2) (难度：3)

1. 根据三维表面模型，计算三维贴图，并优化接缝。

###计算DEM、DOM。(优先级：2) (难度：1)

1. 根据经过贴图的三维模型，计算DEM、DOM。

